<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GoFood - Food Delivery System</title>
<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

body {
  background: linear-gradient(135deg, #ff9a3c, #ff6f3c);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.container {
  background: white;
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.3);
  max-width: 900px;
  width: 100%;
}

/* LOGIN */
.login-section {
  text-align: center;
  max-width: 400px;
  margin: 0 auto;
}

.login-section h1 {
  color: #ff6f3c;
  margin-bottom: 10px;
  font-size: 32px;
}

.login-section p {
  color: #666;
  margin-bottom: 25px;
}

.input-group {
  margin-bottom: 15px;
}

.input-group input {
  width: 100%;
  padding: 12px 15px;
  border: 2px solid #e0e0e0;
  border-radius: 10px;
  font-size: 15px;
  transition: border 0.3s;
}

.input-group input:focus {
  outline: none;
  border-color: #ff6f3c;
}

.btn {
  width: 100%;
  padding: 14px;
  background: #ff6f3c;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.3s;
}

.btn:hover {
  background: #e85c2f;
}

.btn-secondary {
  background: #555;
  margin-top: 10px;
}

.btn-secondary:hover {
  background: #333;
}

.info-text {
  margin-top: 15px;
  padding: 10px;
  background: #f0f0f0;
  border-radius: 8px;
  font-size: 14px;
  color: #555;
}

/* HEADER */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
  padding-bottom: 15px;
  border-bottom: 2px solid #f0f0f0;
}

.header h2 {
  color: #ff6f3c;
  font-size: 26px;
}

.user-info {
  text-align: right;
  color: #666;
  font-size: 14px;
}

/* MENU SECTION */
.section-title {
  color: #333;
  margin: 25px 0 15px;
  font-size: 20px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.food-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 15px;
  margin-bottom: 25px;
}

.food-card {
  background: linear-gradient(135deg, #fff5f0, #ffffff);
  padding: 15px;
  border-radius: 12px;
  text-align: center;
  border: 2px solid #f0f0f0;
  transition: all 0.3s;
  cursor: pointer;
}

.food-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(255,111,60,0.2);
  border-color: #ff6f3c;
}

.food-card h4 {
  color: #333;
  margin-bottom: 8px;
  font-size: 16px;
}

.food-card .price {
  color: #ff6f3c;
  font-weight: bold;
  font-size: 15px;
  margin-bottom: 10px;
}

.food-card button {
  padding: 8px 15px;
  background: #ff6f3c;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  transition: background 0.3s;
}

.food-card button:hover {
  background: #e85c2f;
}

/* DRIVER SECTION */
.driver-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 12px;
  margin-bottom: 25px;
}

.driver-card {
  background: white;
  padding: 12px;
  border-radius: 10px;
  text-align: center;
  border: 2px solid #e0e0e0;
  cursor: pointer;
  transition: all 0.3s;
}

.driver-card.active {
  border-color: #4caf50;
}

.driver-card.inactive {
  opacity: 0.5;
  cursor: not-allowed;
}

.driver-card.selected {
  background: #ff6f3c;
  color: white;
  border-color: #ff6f3c;
}

.driver-card:not(.inactive):hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.driver-card h4 {
  font-size: 15px;
  margin-bottom: 5px;
}

.driver-card .status {
  font-size: 13px;
  font-weight: 600;
}

.status.online {
  color: #4caf50;
}

.status.offline {
  color: #f44336;
}

/* CART SUMMARY */
.cart-summary {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 12px;
  margin-top: 20px;
}

.cart-items {
  max-height: 200px;
  overflow-y: auto;
  margin-bottom: 15px;
}

.cart-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid #e0e0e0;
}

.cart-item:last-child {
  border-bottom: none;
}

.total-section {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 20px;
  font-weight: bold;
  color: #ff6f3c;
  padding-top: 15px;
  border-top: 2px solid #e0e0e0;
}

/* CONFIRMATION */
.confirm-section {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 20px;
}

.confirm-item {
  display: flex;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid #e0e0e0;
}

.confirm-item:last-child {
  border-bottom: none;
}

.confirm-item strong {
  color: #333;
}

.driver-info {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 15px;
  background: white;
  border-radius: 10px;
  margin: 15px 0;
}

.driver-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, #ff6f3c, #ff9a3c);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 24px;
  font-weight: bold;
}

/* TRACKING */
.tracking-section {
  text-align: center;
  padding: 30px;
}

.tracking-status {
  font-size: 48px;
  margin-bottom: 20px;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.tracking-text {
  font-size: 18px;
  color: #666;
  margin-bottom: 30px;
}

.progress-bar {
  height: 8px;
  background: #e0e0e0;
  border-radius: 4px;
  overflow: hidden;
  margin: 20px 0;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #ff6f3c, #ff9a3c);
  animation: progress 3s ease-in-out infinite;
}

@keyframes progress {
  0% { width: 0%; }
  100% { width: 100%; }
}

/* RECAP */
.recap-section {
  background: #f8f9fa;
  padding: 25px;
  border-radius: 12px;
}

.recap-header {
  text-align: center;
  margin-bottom: 25px;
}

.recap-header h2 {
  color: #4caf50;
  font-size: 28px;
  margin-bottom: 8px;
}

.recap-details {
  background: white;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 15px;
}

.recap-row {
  display: flex;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid #f0f0f0;
}

.recap-row:last-child {
  border-bottom: none;
}

.recap-label {
  color: #666;
  font-weight: 500;
}

.recap-value {
  color: #333;
  font-weight: 600;
}

.hidden {
  display: none;
}

.alert {
  padding: 12px 15px;
  border-radius: 8px;
  margin-bottom: 15px;
  font-size: 14px;
}

.alert-warning {
  background: #fff3cd;
  color: #856404;
  border: 1px solid #ffeaa7;
}

.alert-success {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}
</style>
</head>
<body>

<div class="container">
  <!-- LOGIN PAGE -->
  <div id="loginPage">
    <div class="login-section">
      <h1>üçî GoFood</h1>
      <p>Pesan makanan favoritmu sekarang!</p>
      
      <div class="input-group">
        <input type="text" id="username" placeholder="Username" value="user">
      </div>
      
      <div class="input-group">
        <input type="password" id="password" placeholder="Password" value="123">
      </div>
      
      <button class="btn" onclick="login()">Login</button>
      
      <div class="info-text">
        <strong>Demo Account:</strong><br>
        Username: user<br>
        Password: 123
      </div>
    </div>
  </div>

  <!-- ORDER PAGE -->
  <div id="orderPage" class="hidden">
    <div class="header">
      <h2>üçî Pesan Makanan</h2>
      <div class="user-info">
        <div>Selamat datang, <strong id="userName"></strong></div>
        <button class="btn btn-secondary" style="width: auto; padding: 8px 15px; font-size: 14px; margin-top: 5px;" onclick="logout()">Logout</button>
      </div>
    </div>

    <div class="section-title">üçΩÔ∏è Pilih Menu</div>
    <div class="food-grid" id="foodGrid"></div>

    <div class="section-title">üõµ Pilih Driver</div>
    <div id="driverAlert" class="alert alert-warning hidden">
      Silakan pilih driver yang aktif
    </div>
    <div class="driver-grid" id="driverGrid"></div>

    <div class="cart-summary">
      <h3 style="margin-bottom: 15px; color: #333;">üõí Keranjang Belanja</h3>
      <div class="cart-items" id="cartItems">
        <p style="text-align: center; color: #999;">Belum ada item dipilih</p>
      </div>
      <div class="total-section">
        <span>Total:</span>
        <span id="totalPrice">Rp 0</span>
      </div>
      <button class="btn" style="margin-top: 15px;" onclick="goToConfirm()">Lanjut ke Konfirmasi</button>
    </div>
  </div>

  <!-- CONFIRMATION PAGE -->
  <div id="confirmPage" class="hidden">
    <div class="header">
      <h2>‚úÖ Konfirmasi Pesanan</h2>
    </div>

    <div class="confirm-section">
      <h3 style="margin-bottom: 15px; color: #333;">Detail Pesanan</h3>
      <div id="confirmItems"></div>
    </div>

    <div class="driver-info" id="confirmDriver"></div>

    <div class="total-section" style="background: white; padding: 20px; border-radius: 10px;">
      <span>Total Pembayaran:</span>
      <span id="confirmTotal"></span>
    </div>

    <div style="display: flex; gap: 10px; margin-top: 20px;">
      <button class="btn btn-secondary" onclick="backToOrder()">Kembali</button>
      <button class="btn" onclick="confirmOrder()">Konfirmasi & Pesan</button>
    </div>
  </div>

  <!-- TRACKING PAGE -->
  <div id="trackingPage" class="hidden">
    <div class="header">
      <h2>üöö Lacak Pesanan</h2>
    </div>

    <div class="tracking-section">
      <div class="tracking-status">üõµ</div>
      <div class="tracking-text">
        <strong id="trackingDriver"></strong> sedang mengantar pesanan Anda
      </div>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
      <p style="color: #999; font-size: 14px; margin-top: 20px;">
        Estimasi waktu: 15-20 menit
      </p>
      <button class="btn" style="margin-top: 30px; max-width: 300px;" onclick="completeOrder()">Pesanan Selesai</button>
    </div>
  </div>

  <!-- RECAP PAGE -->
  <div id="recapPage" class="hidden">
    <div class="recap-header">
      <h2>‚úÖ Pesanan Selesai</h2>
      <p style="color: #666;">Terima kasih telah memesan!</p>
    </div>

    <div class="recap-section">
      <h3 style="margin-bottom: 15px; color: #333;">üìã Ringkasan Pesanan</h3>
      
      <div class="recap-details">
        <div class="recap-row">
          <span class="recap-label">Pelanggan:</span>
          <span class="recap-value" id="recapCustomer"></span>
        </div>
        <div class="recap-row">
          <span class="recap-label">Driver:</span>
          <span class="recap-value" id="recapDriver"></span>
        </div>
        <div class="recap-row">
          <span class="recap-label">Jumlah Item:</span>
          <span class="recap-value" id="recapItems"></span>
        </div>
      </div>

      <div class="recap-details">
        <h4 style="margin-bottom: 10px; color: #666;">Menu yang dipesan:</h4>
        <div id="recapMenu"></div>
      </div>

      <div class="total-section" style="background: white; padding: 20px; border-radius: 10px; margin-top: 15px;">
        <span>Total Pembayaran:</span>
        <span id="recapTotal"></span>
      </div>

      <button class="btn" style="margin-top: 20px;" onclick="newOrder()">Pesan Lagi</button>
    </div>
  </div>
</div>

<script>
// Data Storage (in-memory replacement for localStorage)
const appData = {
  currentUser: null,
  cart: [],
  selectedDriver: null,
  orderHistory: []
};

// Food Menu Data
const foodMenu = [
  { name: "Nasi Goreng", price: 15000 },
  { name: "Mie Ayam", price: 13000 },
  { name: "Ayam Geprek", price: 18000 },
  { name: "Bakso", price: 15000 },
  { name: "Sate Ayam", price: 20000 },
  { name: "Burger", price: 22000 },
  { name: "Pizza", price: 30000 },
  { name: "Seblak", price: 12000 },
  { name: "Dimsum", price: 18000 },
  { name: "Soto Ayam", price: 16000 },
  { name: "Es Teh", price: 5000 },
  { name: "Kopi", price: 12000 },
  { name: "Jus Jeruk", price: 14000 },
  { name: "Milk Tea", price: 15000 },
  { name: "Donat", price: 6000 },
  { name: "Martabak", price: 25000 },
  { name: "Roti Bakar", price: 12000 },
  { name: "Spaghetti", price: 28000 },
  { name: "Kebab", price: 17000 },
  { name: "Salad", price: 20000 }
];

// Driver Data (40 drivers)
const drivers = [];
for (let i = 1; i <= 40; i++) {
  drivers.push({
    id: i,
    name: `Driver ${i}`,
    isActive: Math.random() > 0.3 // 70% chance of being active
  });
}

// Page Navigation Functions
function showPage(pageId) {
  const pages = ['loginPage', 'orderPage', 'confirmPage', 'trackingPage', 'recapPage'];
  pages.forEach(page => {
    document.getElementById(page).classList.add('hidden');
  });
  document.getElementById(pageId).classList.remove('hidden');
}

// Login Function
function login() {
  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;
  
  if (username === 'user' && password === '123') {
    appData.currentUser = username;
    document.getElementById('userName').textContent = username;
    initOrderPage();
    showPage('orderPage');
  } else {
    alert('‚ùå Username atau password salah!\n\nGunakan:\nUsername: user\nPassword: 123');
  }
}

// Logout Function
function logout() {
  if (confirm('Yakin ingin logout?')) {
    appData.currentUser = null;
    appData.cart = [];
    appData.selectedDriver = null;
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
    showPage('loginPage');
  }
}

// Initialize Order Page
function initOrderPage() {
  // Render Food Menu
  const foodGrid = document.getElementById('foodGrid');
  foodGrid.innerHTML = '';
  
  foodMenu.forEach((food, index) => {
    const card = document.createElement('div');
    card.className = 'food-card';
    card.innerHTML = `
      <h4>${food.name}</h4>
      <div class="price">Rp ${food.price.toLocaleString('id-ID')}</div>
      <button onclick="addToCart(${index})">+ Tambah</button>
    `;
    foodGrid.appendChild(card);
  });
  
  // Render Drivers
  const driverGrid = document.getElementById('driverGrid');
  driverGrid.innerHTML = '';
  
  drivers.forEach((driver, index) => {
    const card = document.createElement('div');
    card.className = `driver-card ${driver.isActive ? 'active' : 'inactive'}`;
    card.id = `driver-${index}`;
    card.innerHTML = `
      <h4>${driver.name}</h4>
      <div class="status ${driver.isActive ? 'online' : 'offline'}">
        ${driver.isActive ? 'üü¢ Aktif' : 'üî¥ Tidak Aktif'}
      </div>
    `;
    
    if (driver.isActive) {
      card.onclick = () => selectDriver(index);
    }
    
    driverGrid.appendChild(card);
  });
  
  updateCart();
}

// Add to Cart
function addToCart(foodIndex) {
  const food = foodMenu[foodIndex];
  appData.cart.push({ ...food });
  updateCart();
}

// Select Driver
function selectDriver(driverIndex) {
  const driver = drivers[driverIndex];
  
  if (!driver.isActive) return;
  
  // Remove previous selection
  document.querySelectorAll('.driver-card').forEach(card => {
    card.classList.remove('selected');
  });
  
  // Select new driver
  document.getElementById(`driver-${driverIndex}`).classList.add('selected');
  appData.selectedDriver = driver;
  
  // Hide warning
  document.getElementById('driverAlert').classList.add('hidden');
}

// Update Cart Display
function updateCart() {
  const cartItems = document.getElementById('cartItems');
  const totalPrice = document.getElementById('totalPrice');
  
  if (appData.cart.length === 0) {
    cartItems.innerHTML = '<p style="text-align: center; color: #999;">Belum ada item dipilih</p>';
    totalPrice.textContent = 'Rp 0';
    return;
  }
  
  // Group items
  const groupedItems = {};
  appData.cart.forEach(item => {
    if (groupedItems[item.name]) {
      groupedItems[item.name].quantity++;
      groupedItems[item.name].total += item.price;
    } else {
      groupedItems[item.name] = {
        quantity: 1,
        price: item.price,
        total: item.price
      };
    }
  });
  
  // Display items
  cartItems.innerHTML = '';
  Object.keys(groupedItems).forEach(name => {
    const item = groupedItems[name];
    const div = document.createElement('div');
    div.className = 'cart-item';
    div.innerHTML = `
      <span>${name} (${item.quantity}x)</span>
      <span>Rp ${item.total.toLocaleString('id-ID')}</span>
    `;
    cartItems.appendChild(div);
  });
  
  // Calculate total
  const total = appData.cart.reduce((sum, item) => sum + item.price, 0);
  totalPrice.textContent = `Rp ${total.toLocaleString('id-ID')}`;
}

// Go to Confirmation
function goToConfirm() {
  if (appData.cart.length === 0) {
    alert('‚ö†Ô∏è Keranjang masih kosong! Pilih menu terlebih dahulu.');
    return;
  }
  
  if (!appData.selectedDriver) {
    alert('‚ö†Ô∏è Silakan pilih driver terlebih dahulu!');
    document.getElementById('driverAlert').classList.remove('hidden');
    return;
  }
  
  // Display confirmation details
  const confirmItems = document.getElementById('confirmItems');
  confirmItems.innerHTML = '';
  
  const groupedItems = {};
  appData.cart.forEach(item => {
    if (groupedItems[item.name]) {
      groupedItems[item.name].quantity++;
      groupedItems[item.name].total += item.price;
    } else {
      groupedItems[item.name] = {
        quantity: 1,
        price: item.price,
        total: item.price
      };
    }
  });
  
  Object.keys(groupedItems).forEach(name => {
    const item = groupedItems[name];
    const div = document.createElement('div');
    div.className = 'confirm-item';
    div.innerHTML = `
      <span><strong>${name}</strong> (${item.quantity}x @ Rp ${item.price.toLocaleString('id-ID')})</span>
      <span>Rp ${item.total.toLocaleString('id-ID')}</span>
    `;
    confirmItems.appendChild(div);
  });
  
  // Display driver info
  const confirmDriver = document.getElementById('confirmDriver');
  confirmDriver.innerHTML = `
    <div class="driver-avatar">${appData.selectedDriver.name.charAt(7)}</div>
    <div>
      <strong style="font-size: 16px;">${appData.selectedDriver.name}</strong>
      <div style="color: #4caf50; font-size: 14px; margin-top: 3px;">üü¢ Siap Mengantarkan</div>
    </div>
  `;
  
  // Display total
  const total = appData.cart.reduce((sum, item) => sum + item.price, 0);
  document.getElementById('confirmTotal').textContent = `Rp ${total.toLocaleString('id-ID')}`;
  
  showPage('confirmPage');
}

// Back to Order
function backToOrder() {
  showPage('orderPage');
}

// Confirm Order
function confirmOrder() {
  const total = appData.cart.reduce((sum, item) => sum + item.price, 0);
  
  // Save order to history
  appData.orderHistory.push({
    customer: appData.currentUser,
    driver: appData.selectedDriver.name,
    items: [...appData.cart],
    total: total,
    timestamp: new Date()
  });
  
  // Show tracking page
  document.getElementById('trackingDriver').textContent = appData.selectedDriver.name;
  showPage('trackingPage');
}

// Complete Order
function completeOrder() {
  const lastOrder = appData.orderHistory[appData.orderHistory.length - 1];
  
  // Display recap
  document.getElementById('recapCustomer').textContent = lastOrder.customer;
  document.getElementById('recapDriver').textContent = lastOrder.driver;
  document.getElementById('recapItems').textContent = lastOrder.items.length;
  
  // Display menu items
  const recapMenu = document.getElementById('recapMenu');
  recapMenu.innerHTML = '';
  
  const groupedItems = {};
  lastOrder.items.forEach(item => {
    if (groupedItems[item.name]) {
      groupedItems[item.name].quantity++;
    } else {
      groupedItems[item.name] = { quantity: 1 };
    }
  });
  
  Object.keys(groupedItems).forEach(name => {
    const div = document.createElement('div');
    div.className = 'recap-row';
    div.innerHTML = `
      <span class="recap-label">${name}</span>
      <span class="recap-value">${groupedItems[name].quantity}x</span>
    `;
    recapMenu.appendChild(div);
  });
  
  document.getElementById('recapTotal').textContent = `Rp ${lastOrder.total.toLocaleString('id-ID')}`;
  
  showPage('recapPage');
}

// New Order
function newOrder() {
  appData.cart = [];
  appData.selectedDriver = null;
  initOrderPage();
  showPage('orderPage');
}

// Initialize app
showPage('loginPage');
</script>

</body>
</html>